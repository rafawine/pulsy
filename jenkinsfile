pipeline {
    agent any

    tools {
        go '1.23.6'
    }

    stages {
        stage("build_app") {
            environment {
                PULSY_ENV = credentials('pulsy_env')
            }
            steps{
                sh 'source $PULSY_ENV'
                sh '/jenkins/build.sh'
            }
        }

        stage("create_service") {
            steps{
                sh './jenkins/create_service.sh'
            }
        }

        stage("execute_service") {
            steps{
                sh './jenkins/execute_service.sh'
            }
        }
    }
}